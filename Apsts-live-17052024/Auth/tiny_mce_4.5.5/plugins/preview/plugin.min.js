tinymce.PluginManager.add("preview",function(e){var t=e.settings,i=!tinymce.Env.ie;e.addCommand("mcePreview",function(){e.windowManager.open({title:"Preview",width:parseInt(e.getParam("plugin_preview_width","650"),10),height:parseInt(e.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(i?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var n,a="";a+='<base href="'+e.documentBaseURI.getURI()+'">',tinymce.each(e.contentCSS,function(t){a+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var r=t.body_id||"tinymce";-1!=r.indexOf("=")&&(r=e.getParam("body_id","","hash"),r=r[e.id]||r);var o=t.body_class||"";-1!=o.indexOf("=")&&(o=e.getParam("body_class","","hash"),o=o[e.id]||"");var s=e.settings.directionality?' dir="'+e.settings.directionality+'"':"",c='<script type="text/javascript">$(document).ready(function(){ $(".modalwindow").on("click",function(e) { e.preventDefault(); var $this = $(this); var url = this.href; window.location.href = url; }); });</script>';if(n="<!DOCTYPE html><html><head>"+a+'<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>'+c+'</head><body id="'+r+'" class="mce-content-body '+o+'"'+s+">"+"<span  style=\"font-family: Verdana, Arial, Helvetica, sans-serif;color: #333333;font-size: "+customsize+";\">"+e.getContent()+"</span>"+"</body></html>",i)this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(n);else{var d=this.getEl("body").firstChild.contentWindow.document;d.open(),d.write(n),d.close()}}})}),e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})});